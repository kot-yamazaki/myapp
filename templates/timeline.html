<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>„Çø„Ç§„É†„É©„Ç§„É≥</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="timeline-body">
    <div class="timeline-container">
        <h1>„Çø„Ç§„É†„É©„Ç§„É≥</h1>

        <div class="top-links">
            {% if 'user_id' in session %}
                <a href="{{ url_for('create_post') }}">üìù Êñ∞Ë¶èÊäïÁ®ø</a> |
                <a href="{{ url_for('logout') }}">üö™ „É≠„Ç∞„Ç¢„Ç¶„Éà</a>
            {% else %}
                <a href="{{ url_for('login') }}">üîë „É≠„Ç∞„Ç§„É≥</a>
            {% endif %}
        </div>

        <hr>

        {% if posts %}
            {% for post in posts %}
                <div class="post-card">
                    <div class="post-header">
                        <strong>{{ post.user.name }}</strong> „Åï„Çì
                    </div>
                    <div class="post-content">
                        {{ post.content }}
                    </div>
                    <div class="post-footer">
                        <small>{{ post.timestamp.strftime('%Y-%m-%d %H:%M') }}</small><br>

                        <form action="{{ url_for('toggle_like', post_id=post.id) }}" method="post" class="like-form">
                            {% if post.is_liked_by(session['user_id']) %}
                                <button type="submit" class="like-button liked">‚ù§Ô∏è „ÅÑ„ÅÑ„Å≠Ëß£Èô§</button>
                            {% else %}
                                <button type="submit" class="like-button">ü§ç „ÅÑ„ÅÑ„Å≠</button>
                            {% endif %}
                        </form>
                        <span class="like-count">{{ post.like_count }} ‰ª∂</span>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p class="no-posts">ÊäïÁ®ø„ÅØ„Åæ„Å†„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</p>
        {% endif %}
    </div>
</body>
</html>
